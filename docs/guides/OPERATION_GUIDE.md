# 🚀 SCM Labs 웹사이트 운영 가이드

## 📋 목차
1. [시스템 개요](#시스템-개요)
2. [배포 전 설정](#배포-전-설정)
3. [일상 운영](#일상-운영)
4. [문제 해결](#문제-해결)
5. [백업 및 복구](#백업-및-복구)

---

## 🎯 시스템 개요

### 구현된 기능
- **SCM 강의 신청 시스템** (`scm-application.html`)
- **커리어 컨설팅 신청 시스템** (`career-application.html`)
- **고객 만족도 조사 시스템** (`survey-form.html`)
- **Notion API 완전 연동**
- **파일 업로드 및 보안**

### 데이터베이스 구조
| 용도 | Notion Database ID | 상태 |
|------|-------------------|------|
| 일반 문의 | `23787a19-32c4-81c5-9df9-eb0bed62f1a8` | ✅ 설정완료 |
| 수강생 관리 | `23787a19-32c4-8129-9a6e-d7ed01c9424f` | ✅ 설정완료 |
| 강의 정보 | `23787a1932c481bba2c1d5f33256cc37` | ✅ 설정완료 |
| 설문조사 | `your_survey_database_id_here` | ⚠️ 설정필요 |

---

## ⚙️ 배포 전 설정

### 1. Notion 설문조사 DB 생성 **[필수]**

#### Step 1: Notion에서 새 Database 생성
1. Notion 워크스페이스에 접속
2. 새 페이지 → Database → Table 선택
3. 제목: **"고객 만족도 조사"**

#### Step 2: 필드 구조 생성 (`SURVEY_DB_STRUCTURE.md` 참고)
```
이름 (Title) - 필수
이메일 (Email) - 필수  
전화번호 (Phone) - 선택
참여서비스 (Select) - 필수: SCM강의/커리어컨설팅/둘다
전체만족도 (Select) - 필수: 매우만족/만족/보통/불만족/매우불만족
강사만족도 (Select) - 필수: 매우만족/만족/보통/불만족/매우불만족  
내용만족도 (Select) - 필수: 매우만족/만족/보통/불만족/매우불만족
추천의향 (Select) - 필수: 매우추천/추천/보통/비추천/매우비추천
개선사항 (Rich Text) - 선택
추가의견 (Rich Text) - 선택
작성일 (Created Time) - 자동
IP주소 (Rich Text) - 자동
```

#### Step 3: Database ID 확인 및 설정
1. 생성된 DB URL에서 ID 추출: `https://notion.so/workspace/DATABASE_ID`
2. `includes/config.php` 수정:
```php
'NOTION_SURVEY_DB_ID' => '새로운_실제_DB_ID', // 여기에 실제 ID 입력
```

### 2. 환경 변수 설정 **[권장]**
```bash
# .env 파일 생성 (프로젝트 루트에)
NOTION_API_KEY=실제_노션_API_키
```

### 3. 서버 권한 설정
```bash
chmod 755 uploads/ logs/
chmod 644 api/.htaccess includes/.htaccess uploads/.htaccess logs/.htaccess
```

---

## 📊 일상 운영

### 데이터 확인 방법

#### 1. 신청 현황 확인
- **SCM 강의**: Notion "Students" DB 확인
- **컨설팅**: Notion "Inquiries" DB 확인  
- **설문조사**: Notion "고객 만족도 조사" DB 확인

#### 2. 로그 모니터링
```bash
# 최근 설문조사 로그
tail -f logs/survey.log

# 최근 SCM 신청 로그  
tail -f logs/scm.log

# 최근 컨설팅 신청 로그
tail -f logs/career.log
```

### 정기 점검 항목 **[주 1회]**

#### 시스템 상태 점검
- [ ] 웹사이트 접속 정상 여부
- [ ] 각 신청 폼 작동 테스트
- [ ] 파일 업로드 기능 테스트
- [ ] 이메일 알림 수신 확인

#### 용량 관리
- [ ] `uploads/` 디렉토리 용량 확인
- [ ] `logs/` 파일 크기 확인 (10MB 초과 시 백업 후 삭제)
- [ ] 서버 디스크 공간 확인

---

## 🔧 문제 해결

### 자주 발생하는 문제

#### 1. "설문조사 DB ID가 설정되지 않았습니다" 에러
**원인**: Notion 설문조사 DB가 생성되지 않음
**해결**: 위 "배포 전 설정" 1번 항목 수행

#### 2. 파일 업로드 실패
**원인**: 
- 파일 크기 초과 (10MB 제한)
- 허용되지 않는 파일 형식
- 서버 권한 부족

**해결**:
```bash
# 권한 확인
ls -la uploads/
# 권한 설정
chmod 755 uploads/
```

#### 3. Notion API 연결 실패
**원인**: API 키 만료 또는 잘못된 DB ID
**해결**: 
1. Notion Integration 페이지에서 API 키 확인
2. Database ID 재확인
3. 권한 설정 확인

### 에러 로그 분석

#### 로그 파일 위치
- 설문조사: `logs/survey.log`
- SCM 신청: `logs/scm.log` 
- 컨설팅 신청: `logs/career.log`

#### 로그 형태 예시
```json
{
  "timestamp": "2025-01-08 17:30:15",
  "type": "SURVEY_SUBMISSION_SUCCESS", 
  "survey_id": "notion_page_id",
  "service_used": "SCM 기초강의",
  "overall_satisfaction": "매우만족"
}
```

---

## 💾 백업 및 복구

### 정기 백업 **[월 1회]**

#### 1. 파일 백업
```bash
# 전체 프로젝트 백업
tar -czf scm_website_backup_$(date +%Y%m%d).tar.gz \
  --exclude='.git' \
  --exclude='node_modules' \
  --exclude='logs/*.log' \
  .
```

#### 2. 업로드된 파일 백업
```bash
# 이력서 파일 백업
rsync -av uploads/ backup/uploads_$(date +%Y%m%d)/
```

#### 3. 설정 파일 백업
```bash
# 중요 설정 파일 백업
cp includes/config.php backup/config_$(date +%Y%m%d).php
cp .env backup/env_$(date +%Y%m%d).backup 2>/dev/null || true
```

### 복구 절차

#### 1. 긴급 복구
```bash
# 백업에서 복구
tar -xzf scm_website_backup_YYYYMMDD.tar.gz
# 권한 재설정
chmod 755 uploads/ logs/
```

#### 2. Notion 데이터 복구
- Notion은 자체적으로 버전 히스토리 제공
- Database 설정 → History에서 이전 상태 복구 가능

---

## 📈 성능 모니터링

### 체크리스트

#### 월간 리포트 작성
- [ ] 총 신청 건수 (SCM/컨설팅/설문)
- [ ] 설문조사 만족도 평균
- [ ] 주요 개선사항 요청 정리
- [ ] 시스템 장애 발생 기록

#### 개선사항 모니터링
- 설문조사 "개선사항" 필드 정기 검토
- 높은 빈도 키워드 분석
- 불만족 응답에 대한 후속 조치 계획

---

## 🚨 긴급 연락처

### 기술 지원
- **시스템 문제**: 개발팀 연락
- **Notion API 이슈**: [Notion 개발자 문서](https://developers.notion.com/) 참고
- **서버 장애**: 호스팅 업체 연락

### 백업 연락 방법
- 이메일: contact@scmexpert.com
- 전화: 010-1234-5678

---

## ✅ 런칭 체크리스트

### 배포 전 마지막 확인
- [ ] Notion 설문조사 DB 생성 및 ID 설정
- [ ] 모든 폼에서 테스트 제출 성공
- [ ] 이메일 알림 정상 수신
- [ ] 파일 업로드 테스트 완료
- [ ] 설문조사 4단계 진행 테스트
- [ ] 모바일 반응형 확인
- [ ] 보안 헤더 설정 확인

### 런칭 후 모니터링 **[첫 주]**
- [ ] 일일 신청 현황 확인
- [ ] 에러 로그 모니터링
- [ ] 사용자 피드백 수집
- [ ] 설문조사 응답률 확인

---

**🎉 모든 시스템이 준비되었습니다!**

*Notion 설문조사 DB만 생성하시면 즉시 서비스 오픈 가능합니다.*

---
*마지막 업데이트: 2025-01-08 | Generated by Claude Code*