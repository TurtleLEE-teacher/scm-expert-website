<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì»¨ì„¤íŒ… í›„ê¸° ë””ë²„ê¹…</title>
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 900px; margin: 0 auto; }
        .review-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        pre { background: #f5f5f5; padding: 10px; overflow: auto; font-size: 12px; }
        .step { background: #e3f2fd; padding: 10px; margin: 10px 0; border-left: 4px solid #2196f3; }
    </style>
</head>
<body>
    <h1>ğŸ” ì»¨ì„¤íŒ… í›„ê¸° í‘œì‹œ ë””ë²„ê¹…</h1>
    <div id="results"></div>
    <hr>
    <h2>ì‹¤ì œ ë Œë”ë§ í…ŒìŠ¤íŠ¸</h2>
    <div class="reviews-grid" id="consultingReviews">
        <div>ë¡œë”© ì¤‘...</div>
    </div>

    <script>
        const results = document.getElementById('results');
        
        // ë‹¨ê³„ë³„ ë””ë²„ê¹…
        async function debugConsultingReviews() {
            try {
                // Step 1: ë°ì´í„° ë¡œë“œ
                results.innerHTML += '<div class="step">1ï¸âƒ£ ë°ì´í„° ë¡œë“œ ì¤‘...</div>';
                const response = await fetch('./data/reviews.json');
                if (!response.ok) throw new Error('HTTP ' + response.status);
                
                const data = await response.json();
                const allReviews = data.data || [];
                
                results.innerHTML += '<div class="success">âœ… ë°ì´í„° ë¡œë“œ ì„±ê³µ: ' + allReviews.length + 'ê°œ</div>';
                
                // Step 2: ì»¨ì„¤íŒ… í•„í„°ë§
                results.innerHTML += '<div class="step">2ï¸âƒ£ ì»¨ì„¤íŒ… í›„ê¸° í•„í„°ë§ ì¤‘...</div>';
                const consultingReviews = allReviews.filter(r => r.category === 'consulting');
                
                results.innerHTML += '<div class="success">âœ… Consulting í•„í„°ë§ ê²°ê³¼: ' + consultingReviews.length + 'ê°œ</div>';
                
                if (consultingReviews.length === 0) {
                    results.innerHTML += '<div class="error">âŒ ì»¨ì„¤íŒ… í›„ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤!</div>';
                    results.innerHTML += '<p>ìƒ˜í”Œ ì¹´í…Œê³ ë¦¬ ê°’:</p><pre>' + 
                        JSON.stringify(allReviews.slice(0, 5).map(r => ({ category: r.category, author: r.author })), null, 2) + 
                        '</pre>';
                    return;
                }
                
                // Step 3: HTML ìƒì„±
                results.innerHTML += '<div class="step">3ï¸âƒ£ HTML ì¹´ë“œ ìƒì„± ì¤‘...</div>';
                
                consultingReviews.forEach((review, i) => {
                    results.innerHTML += '<div class="review-card">' +
                        '<strong>' + (i + 1) + '. ' + review.author + '</strong> ' +
                        '(' + review.rating + 'ì , ' + review.date + ')<br>' +
                        '<small>Category: ' + review.category + '</small><br>' +
                        review.content.substring(0, 100) + '...' +
                        '</div>';
                });
                
                // Step 4: ì‹¤ì œ ë Œë”ë§ (reviews.jsì™€ ë™ì¼í•œ ë¡œì§)
                results.innerHTML += '<div class="step">4ï¸âƒ£ ì‹¤ì œ DOMì— ë Œë”ë§ ì¤‘...</div>';
                const container = document.getElementById('consultingReviews');
                
                if (!container) {
                    results.innerHTML += '<div class="error">âŒ consultingReviews ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!</div>';
                    return;
                }
                
                const STAR_SVG = '<svg viewBox="0 0 20 20" width="16" height="16" fill="gold"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>';
                
                const cardsHtml = consultingReviews.slice(0, 6).map(r => {
                    const starsHtml = '<div style="display:inline-block">' + STAR_SVG.repeat(r.rating) + '</div>';
                    return '<div class="review-card">' +
                        starsHtml + '<br>' +
                        '<p>"' + r.content + '"</p>' +
                        '<span><strong>' + r.author + '</strong> <small>' + r.date + '</small></span>' +
                        '</div>';
                }).join('');
                
                container.innerHTML = cardsHtml;
                results.innerHTML += '<div class="success">âœ… ë Œë”ë§ ì™„ë£Œ!</div>';
                
                // Step 5: ìµœì¢… í™•ì¸
                results.innerHTML += '<div class="step">5ï¸âƒ£ ìµœì¢… í™•ì¸</div>';
                results.innerHTML += '<p>consultingReviews ì»¨í…Œì´ë„ˆì˜ ìì‹ ìš”ì†Œ ìˆ˜: <strong>' + 
                    container.children.length + '</strong></p>';
                
                if (container.children.length > 0) {
                    results.innerHTML += '<div class="success">ğŸ‰ ì„±ê³µ! ì»¨ì„¤íŒ… í›„ê¸°ê°€ í‘œì‹œë˜ì–´ì•¼ í•©ë‹ˆë‹¤!</div>';
                } else {
                    results.innerHTML += '<div class="error">âŒ ë Œë”ë§ ì‹¤íŒ¨!</div>';
                }
                
            } catch (error) {
                results.innerHTML += '<div class="error">âŒ ì˜¤ë¥˜: ' + error.message + '</div>';
                console.error(error);
            }
        }
        
        debugConsultingReviews();
    </script>
</body>
</html>
